<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Ubuntu on 李国宝</title><link>https://liguobao.github.io/tags/ubuntu/</link><description>Recent content in Ubuntu on 李国宝</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Fri, 22 Sep 2023 00:00:00 +0000</lastBuildDate><atom:link href="https://liguobao.github.io/tags/ubuntu/index.xml" rel="self" type="application/rss+xml"/><item><title>Ubuntu 有线网卡掉线重启备忘</title><link>https://liguobao.github.io/p/ubuntu-wifi-loss/</link><pubDate>Fri, 22 Sep 2023 00:00:00 +0000</pubDate><guid>https://liguobao.github.io/p/ubuntu-wifi-loss/</guid><description>&lt;img src="https://liguobao.github.io/p/ubuntu-wifi-loss/xiaohei.png" alt="Featured image of post Ubuntu 有线网卡掉线重启备忘" />&lt;h2 id="奇怪的故障">奇怪的故障
&lt;/h2>&lt;p>家里的台式机上有两个网卡，&lt;/p>
&lt;p>主板自带有线网卡，PCIE 上插了一个无线网卡。&lt;/p>
&lt;p>上次搞 李国宝：Tesla P40 显卡 2023 年 9 月跳坑指南&lt;/p>
&lt;p>这玩意的时候，拆装过主板和机箱，&lt;/p>
&lt;p>系统重新开始之后就有线网卡就掉线了。&lt;/p>
&lt;p>很是奇怪。&lt;/p>
&lt;p>再早一些时间也遇到过类似的问题，&lt;/p>
&lt;p>每次都是把手动把之前的 Ubuntu 的 WLAN 有线网卡删掉之后，&lt;/p>
&lt;p>重新添加回来，然后就正常工作了。&lt;/p>
&lt;p>但是现在&amp;hellip;&lt;/p>
&lt;p>遇到了问题。&lt;/p>
&lt;p>我手上没有显示器了。&lt;/p>
&lt;p>（PS：之前的借给朋友用了）&lt;/p>
&lt;p>倒是客厅有电视机，但&amp;hellip;.&lt;/p>
&lt;p>网线拉不过去。很是尴尬。&lt;/p>
&lt;p>于是，无线网凑合用了好一阵子了。&lt;/p>
&lt;p>迷。&lt;/p>
&lt;p>说好的计算机世界没有玄学。&lt;/p>
&lt;p>道理上。&lt;/p>
&lt;p>只需要重置这个网卡就完事了。&lt;/p>
&lt;p>在 ifconfig 里面，正常的网卡配置长这样。&lt;/p>
&lt;p>无线网卡&lt;/p>
&lt;p>一般的虚拟网络长这样。&lt;/p>
&lt;p>不正常的网卡。&lt;/p>
&lt;p>PS：没有 inet 字段，因为系统识别异常。&lt;/p>
&lt;p>ifconfig down &amp;amp; up
禁用之后再启用网卡是使用 ifconfig 命令的。&lt;/p>
&lt;p>但是在这里无效。&lt;/p>
&lt;p>参考：Linux 中国：Linux 中如何启用和禁用网卡？&lt;/p>
&lt;p>还有别的办法吗？&lt;/p>
&lt;p>Linux 中国：Linux 中如何启用和禁用网卡？&lt;/p>
&lt;p>在上面这个文章写过有 nmtui 工具。&lt;/p>
&lt;p>nmtui&lt;/p>
&lt;p>nmtui 是一个与 NetworkManager 交互的、基于 curses 图形库的终端 UI 应用。&lt;/p>
&lt;p>在启用 nmtui 的时候，如果第一个参数没有特别指定，它会引导用户选择对应的操作去执行。&lt;/p>
&lt;p>执行以下命令打开 mntui 界面。选择 “Active a connection” 然后点击 “OK”。&lt;/p>
&lt;p>PS： 这里都是正常的配置了。&lt;/p>
&lt;p>异常配置的情况下，Device 显示的是一个无效的网卡 id&lt;/p>
&lt;p>选中网卡，选择 delete。&lt;/p>
&lt;p>然后重新 Add 一个新的网络。&lt;/p>
&lt;p>填入我们在 ifconfig 看到的网卡 Id。&lt;/p>
&lt;p>选择 ok。&lt;/p>
&lt;p>完事。&lt;/p>
&lt;p>回顾问题&lt;/p>
&lt;p>到这里突然想明白了。&lt;/p>
&lt;p>这个玩意是因为，硬件变更系统重新初始化之后，&lt;/p>
&lt;p>给主板网卡分配了一个新的设备 Id，&lt;/p>
&lt;p>然后系统网络配置使用的还是旧的设备 Id，&lt;/p>
&lt;p>于是&amp;hellip;.&lt;/p>
&lt;p>网络没办法正常工作了。&lt;/p>
&lt;p>重置网卡设备对它是无效的。&lt;/p>
&lt;p>只能重新初始化网络配置。&lt;/p>
&lt;p>So&amp;hellip;&lt;/p>
&lt;p>如上。&lt;/p></description></item></channel></rss>